<!DOCTYPE html>
<html lang="en">
	<head>
		<%- include('./partials/head.ejs')%>
	</head>
	<body>
		<header class="container header">
			<%- include('./partials/logo.ejs')%> 
      		<%- include('./partials/nav.ejs')%>
		</header>
      	<main class="container main">
			<article class="post">
				<h1>Post</h1>
				<h3 class="post__item"><%= post.title %></h3>
				<span class="post__item"><%= post.text %></span>
				<span class="post__item date"><%= post.date || 'no date' %></span>
				<div class="edit_btn">
					<a class="edit" href="/edit/<%= post.id %>"><i class="fas fa-pencil" aria-hidden="true"></i></a>
					<button data-id="<%= post.id %>"><i class="fas fa-remove" aria-hidden="true" data-id="<%= post.id %>"></i></button>
				</div>
			</article>
      	</main>
      	<footer class="footer container">
              <%- include('./partials/footer.ejs')%> 
        </footer>
		<script>
            document.addEventListener('click', (e) => {
                const id = e.target?.dataset?.id || null
                if(id) {
                    fetch(`/posts/${id}`, {
                        method: 'DELETE',
                    }).then(() => {
                        window.location.href = '/posts';
                    })
                }
            })
        </script>	  
	</body>
</html>
